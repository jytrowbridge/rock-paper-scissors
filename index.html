<!DOCTYPE html>
<html>
    <head>

    </head>
    <body>
    <script>
        function getRndInteger(min, max) {
            // returns random integer in range [min,max). Note that range excludes max. 
            // Taken from W3 schools page
            return Math.floor(Math.random() * (max - min) ) + min;
        }

        function toTitleCase(s) {
            // returns string s converted to title case (e.g. "Test", "This is capita")
            return s[0].toUpperCase() + s.slice(1).toLowerCase();
        }
        
        function computerPlay () {
            // randomly selects 
            return playOptions[getRndInteger(0,playOptions.length)];
        }

        function playRound(playerSelection, computerSelection) {
            // returns 'win', 'lose', 'tie', or 'invalid'
            playerSelection = playerSelection.toLowerCase()
            if (playOptions.indexOf(playerSelection) == -1) {
                return 'invalid';
            } 
            return isWin(playerSelection, computerSelection) ? 'win'
                 : isWin(computerSelection, playerSelection) ? 'lose'
                 : 'tie'
        }

        function isWin(throw1, throw2) {  
            return (throw1 == 'rock' && throw2 == 'scissors')
                || (throw1 == 'paper' && throw2 == 'rock')
                || (throw1 == 'scissors' && throw2 == 'paper')           
        }

        let playOptions = ['rock', 'paper', 'scissors'];
        let winsNeeded = 5;

        function game(winsNeeded = 5) {
            // Plays a 5-round game of rock, paper, scissors
            let playerWins = computerWins = numRounds = 0;
            let msg;
            while (playerWins < winsNeeded && computerWins < winsNeeded) {
                let playerSelection = prompt('Please pick Rock, Paper, or Scissors')
                let computerSelection = computerPlay()
                result = playRound(playerSelection, computerSelection);
                if (result == 'invalid') {
                    console.log('Invalid input. Please enter Rock, Paper, or Scissors');
                    continue;
                } else if (result == 'win') {
                    playerWins++;
                    msg = `You Win The Round! ${toTitleCase(playerSelection)} beats ${toTitleCase(computerSelection)}.`;
                } else if (result == 'lose') {
                    computerWins++
                    msg = `You Lose The Round! ${toTitleCase(computerSelection)} beats ${toTitleCase(playerSelection)}.`;
                } else if (result == 'tie') {
                    msg = `You Tie The Round! You both chose ${toTitleCase(computerSelection)}.`;
                }
                console.log(msg + ` Player: ${playerWins}, Computer: ${computerWins}`)
                numRounds++;
            }
            if (playerWins == winsNeeded) {
                console.log(`You win the game ${playerWins} to ${computerWins} in ${numRounds} rounds.`);
            } else if (computerWins == winsNeeded) {
                console.log(`You lose the game ${computerWins} to ${playerWins} in ${numRounds} rounds.`);
            }
        }
        //game()

    </script>
    </body>
</html>